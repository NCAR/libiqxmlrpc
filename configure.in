AC_INIT( libiqxmlrpc/value.h )

#release versioning
GENERIC_MAJOR_VERSION=0
GENERIC_MINOR_VERSION=1
GENERIC_MICRO_VERSION=0
GENERIC_VERSION=$GENERIC_MAJOR_VERSION.$GENERIC_MINOR_VERSION.$GENERIC_MICRO_VERSION
AC_SUBST(GENERIC_VERSION)

#shared library versioning
GENERIC_LIBRARY_VERSION=13:0:0
#                       | | |
#                +------+ | +---+
#                |        |     |
#             current:revision:age
#                |        |     |
#                |        |     +- increment if interfaces have been added
#                |        |        set to zero if interfaces have been removed
#                                  or changed
#                |        +- increment if source code has changed
#                |           set to zero if current is incremented
#                +- increment if interfaces have been added, removed or changed
AC_SUBST(GENERIC_LIBRARY_VERSION)

VERSION=$GENERIC_VERSION
AM_INIT_AUTOMAKE( libiqxmlrpc, $VERSION )

dnl Checks for programs.
AC_PROG_CXX
AC_PROG_AWK
AC_PROG_CC
AC_PROG_INSTALL
AC_PROG_LN_S
AC_PROG_MAKE_SET
AC_LANG_CPLUSPLUS
AM_PROG_LIBTOOL

INCLUDES='-I${top_srcdir}'
CXXFLAGS="-O2"

AC_ARG_ENABLE( debug,
  [  --enable-debug   enables adding debug info into binaries],
  [CXXFLAGS="$CXXFLAGS -g"] )

INCLUDES="$INCLUDES `pkg-config --cflags libxml++-1.0`"
LDFLAGS="$LDFLAGS `pkg-config --libs libxml++-1.0`"

AC_SUBST(CXXFLAGS)
AC_SUBST(INCLUDES)
AC_SUBST(LDFLAGS)

AC_OUTPUT(
  Makefile
  libiqxmlrpc/Makefile
  tests/Makefile
  doc/Makefile
)
